<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Mastodon Markov Chains, and Why I Created My Own | Ewan&#39;s Corner</title>
<meta name="keywords" content="Fediverse, Programming, Python">
<meta name="description" content="Gibberish is my hobby.">
<meta name="author" content="Ewan">
<link rel="canonical" href="https://ewancroft.uk/blog/mastodon-markov-chains/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a6d0b5b7e0199535e21a4756a84a539c977c66791505ce15455dce0ff70abb9f.css" integrity="sha256-ptC1t&#43;AZlTXiGkdWqEpTnJd8ZnkVBc4VRV3OD/cKu58=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://ewancroft.uk/images/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://ewancroft.uk/images/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://ewancroft.uk/images/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://ewancroft.uk/images/favicon/apple-touch-icon.png">
<link rel="mask-icon" href="https://ewancroft.uk/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://ewancroft.uk/blog/mastodon-markov-chains/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Mastodon Markov Chains, and Why I Created My Own" />
<meta property="og:description" content="Gibberish is my hobby." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ewancroft.uk/blog/mastodon-markov-chains/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2024-03-03T14:24:14+00:00" />
<meta property="article:modified_time" content="2024-03-03T14:24:14+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mastodon Markov Chains, and Why I Created My Own"/>
<meta name="twitter:description" content="Gibberish is my hobby."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blog",
      "item": "https://ewancroft.uk/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Mastodon Markov Chains, and Why I Created My Own",
      "item": "https://ewancroft.uk/blog/mastodon-markov-chains/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Mastodon Markov Chains, and Why I Created My Own",
  "name": "Mastodon Markov Chains, and Why I Created My Own",
  "description": "Gibberish is my hobby.",
  "keywords": [
    "Fediverse", "Programming", "Python"
  ],
  "articleBody": "Markov chains are interesting, aren’t they?\nIt’s a way to create a relatively simple algorithm with maths, and I did that!\nAs you would see from the bot, it takes my posts and spits out new randomised posts, which usually is gibberish.\nWhy did I create one? I created my bot as I had seen other Markov chain generative bots such as @chain@brain.d.on-t.work (which is built from @kopper@brain.d.on-t.work’s posts). It sparked interest in the gibberish that it could generate, but I wanted to keep it updated, so I did it myself!\nOpen source? I also made it open-source with the MIT Licence so that other people could use my shoddy code (If it works, don’t touch it!) and build on it.\nI’m honestly just glad I was able to use Python again. It was fun to code!\nHow Does the Script work? Here is a brief explanation of how the Mastodon Markov chain bot works. If you’d like to learn how Markov chains work, I recommend watching this video by Harvard.\nInitialisation and Setup The script begins by importing necessary libraries like dotenv for managing environment variables, MarkovText from markovchain.text for Markov chain functionality, and Mastodon for interaction with the Mastodon API through Mastodon.py. Additionally, it imports modules for handling HTML content and regular expressions.\nEnvironment Configuration It loads environment variables from a .env file using dotenv.load_dotenv(). These variables include Mastodon base URL, access tokens, and other configuration details necessary for API authentication.\nCleaning Content A function called clean_content() is defined to sanitise HTML content fetched from Mastodon posts. It removes HTML tags, decodes HTML entities, eliminates usernames, and filters out special characters, ensuring clean input for the Markov chain.\nFetching Mastodon Posts Another function, get_account_posts(), retrieves recent posts from the specified Mastodon account. It cleans the content using the previously defined function and returns a list of sanitized posts.\nGenerating and Posting The script defines generate_and_post_example() to generate Markov chain text and post it to a destination Mastodon account. It ensures the generated text meets character limits and handles posting errors gracefully.\nDataset Refresh To keep the Markov dataset up to date, there’s a refresh_dataset() function. It fetches recent posts from the source Mastodon account, cleans them, and adds them to the Markov chain dataset.\nMain Loop The main loop orchestrates the entire process. It calculates a random refresh interval between 5 to 10 minutes and schedules the next refresh accordingly. During each iteration, it refreshes the dataset, generates and posts an example, then waits until the next refresh interval before repeating the process.\nUser Interaction The script interacts with the user when necessary, prompting for Mastodon and environment variable details if they’re not already configured. It also monitors for the ctrl+C hotkey as a way for the script to be stopped immediately.\nConclusion Working on this project reignited my love for coding in Python. The process involved in setting up the Mastodon Markov chain bot, from importing necessary libraries to cleaning content and orchestrating dataset refreshes, has been both educational and rewarding. Moreover, the interaction with users, prompt handling, and error management added a layer of complexity that enhanced the overall coding experience.\n",
  "wordCount" : "525",
  "inLanguage": "en",
  "datePublished": "2024-03-03T14:24:14Z",
  "dateModified": "2024-03-03T14:24:14Z",
  "author":[{
    "@type": "Person",
    "name": "Ewan"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://ewancroft.uk/blog/mastodon-markov-chains/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Ewan's Corner",
    "logo": {
      "@type": "ImageObject",
      "url": "https://ewancroft.uk/images/favicon/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <link rel="alternate"
    type="application/rss+xml"
    href="https://ewancroft.uk//index.xml"
    title="Ewan&#39;s Corner">
    <nav class="nav">
        <div class="logo">
            <a href="https://ewancroft.uk/" accesskey="h" title="Ewan&#39;s Corner (Alt + H)">Ewan&#39;s Corner</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://ewancroft.uk/archive" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://ewancroft.uk/verification" title="Verification">
                    <span>Verification</span>
                </a>
            </li>
            <li>
                <a href="https://ewancroft.uk/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://ewancroft.uk/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://ewancroft.uk/">Home</a>&nbsp;»&nbsp;<a href="https://ewancroft.uk/blog/">Blog</a></div>
    <h1 class="post-title entry-hint-parent">
      Mastodon Markov Chains, and Why I Created My Own
    </h1>
    <div class="post-description">
      Gibberish is my hobby.
    </div>
    <div class="post-meta"><span title='2024-03-03 14:24:14 +0000 UTC'>03 Mar, 2024 at 14:24</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;525 words&nbsp;·&nbsp;Ewan

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#why-did-i-create-one" aria-label="Why did I create one?">Why did I create one?</a><ul>
                        
                <li>
                    <a href="#open-source" aria-label="Open source?">Open source?</a></li></ul>
                </li>
                <li>
                    <a href="#how-does-the-script-work" aria-label="How Does the Script work?">How Does the Script work?</a><ul>
                        
                <li>
                    <a href="#initialisation-and-setup" aria-label="Initialisation and Setup">Initialisation and Setup</a></li>
                <li>
                    <a href="#environment-configuration" aria-label="Environment Configuration">Environment Configuration</a></li>
                <li>
                    <a href="#cleaning-content" aria-label="Cleaning Content">Cleaning Content</a></li>
                <li>
                    <a href="#fetching-mastodon-posts" aria-label="Fetching Mastodon Posts">Fetching Mastodon Posts</a></li>
                <li>
                    <a href="#generating-and-posting" aria-label="Generating and Posting">Generating and Posting</a></li>
                <li>
                    <a href="#dataset-refresh" aria-label="Dataset Refresh">Dataset Refresh</a></li>
                <li>
                    <a href="#main-loop" aria-label="Main Loop">Main Loop</a></li>
                <li>
                    <a href="#user-interaction" aria-label="User Interaction">User Interaction</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p><a href="https://en.wikipedia.org/wiki/Markov_chain">Markov chains</a> are interesting, aren&rsquo;t they?</p>
<p>It&rsquo;s a way to create a relatively simple algorithm with <em>maths</em>, and I did that!</p>
<p>As you would see from the bot, it takes my posts and spits out new randomised posts, which usually is gibberish.</p>
<h2 id="why-did-i-create-one">Why did I create one?<a hidden class="anchor" aria-hidden="true" href="#why-did-i-create-one">#</a></h2>
<p>I created my bot as I had seen other Markov chain generative bots such as <a href="https://brain.d.on-t.work/@chain">@chain@brain.d.on-t.work</a> (which is built from <a href="https://brain.d.on-t.work/@kopper">@kopper@brain.d.on-t.work</a>&rsquo;s posts). It sparked interest in the gibberish that it could generate, but I wanted to keep it updated, so <em>I did it myself!</em></p>
<h3 id="open-source">Open source?<a hidden class="anchor" aria-hidden="true" href="#open-source">#</a></h3>
<p>I also made it open-source with the <a href="https://opensource.org/license/mit">MIT Licence</a> so that other people could use my shoddy code <em>(If it works, don&rsquo;t touch it!)</em> and build on it.</p>
<p>I&rsquo;m honestly just glad I was able to use Python again. It was fun to code!</p>
<h2 id="how-does-the-script-work">How Does the Script work?<a hidden class="anchor" aria-hidden="true" href="#how-does-the-script-work">#</a></h2>
<p>Here is a brief explanation of how <a href="https://github.com/ewanc26/mastodon-markov">the Mastodon Markov chain bot</a> works. If you&rsquo;d like to learn how Markov chains work, I recommend watching <a href="https://www.youtube.com/watch?v=JHwyHIz6a8A">this video by Harvard</a>.</p>
<h3 id="initialisation-and-setup">Initialisation and Setup<a hidden class="anchor" aria-hidden="true" href="#initialisation-and-setup">#</a></h3>
<p>The script begins by importing necessary libraries like <code>dotenv</code> for managing environment variables, <code>MarkovText</code> from <code>markovchain.text</code> for Markov chain functionality, and <code>Mastodon</code> for interaction with the Mastodon API through <a href="https://github.com/halcy/Mastodon.py/">Mastodon.py</a>. Additionally, it imports modules for handling HTML content and regular expressions.</p>
<h3 id="environment-configuration">Environment Configuration<a hidden class="anchor" aria-hidden="true" href="#environment-configuration">#</a></h3>
<p>It loads environment variables from a <code>.env</code> file using <code>dotenv.load_dotenv()</code>. These variables include Mastodon base URL, access tokens, and other configuration details necessary for API authentication.</p>
<h3 id="cleaning-content">Cleaning Content<a hidden class="anchor" aria-hidden="true" href="#cleaning-content">#</a></h3>
<p>A function called <code>clean_content()</code> is defined to sanitise HTML content fetched from Mastodon posts. It removes HTML tags, decodes HTML entities, eliminates usernames, and filters out special characters, ensuring clean input for the Markov chain.</p>
<h3 id="fetching-mastodon-posts">Fetching Mastodon Posts<a hidden class="anchor" aria-hidden="true" href="#fetching-mastodon-posts">#</a></h3>
<p>Another function, <code>get_account_posts()</code>, retrieves recent posts from the specified Mastodon account. It cleans the content using the previously defined function and returns a list of sanitized posts.</p>
<h3 id="generating-and-posting">Generating and Posting<a hidden class="anchor" aria-hidden="true" href="#generating-and-posting">#</a></h3>
<p>The script defines <code>generate_and_post_example()</code> to generate Markov chain text and post it to a destination Mastodon account. It ensures the generated text meets character limits and handles posting errors gracefully.</p>
<h3 id="dataset-refresh">Dataset Refresh<a hidden class="anchor" aria-hidden="true" href="#dataset-refresh">#</a></h3>
<p>To keep the Markov dataset up to date, there&rsquo;s a <code>refresh_dataset()</code> function. It fetches recent posts from the source Mastodon account, cleans them, and adds them to the Markov chain dataset.</p>
<h3 id="main-loop">Main Loop<a hidden class="anchor" aria-hidden="true" href="#main-loop">#</a></h3>
<p>The main loop orchestrates the entire process. It calculates a random refresh interval between 5 to 10 minutes and schedules the next refresh accordingly. During each iteration, it refreshes the dataset, generates and posts an example, then waits until the next refresh interval before repeating the process.</p>
<h3 id="user-interaction">User Interaction<a hidden class="anchor" aria-hidden="true" href="#user-interaction">#</a></h3>
<p>The script interacts with the user when necessary, prompting for Mastodon and environment variable details if they&rsquo;re not already configured. It also monitors for the <code>ctrl+C</code> hotkey as a way for the script to be stopped immediately.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Working on this project reignited my love for coding in Python. The process involved in setting up the Mastodon Markov chain bot, from importing necessary libraries to cleaning content and orchestrating dataset refreshes, has been both educational and rewarding. Moreover, the interaction with users, prompt handling, and error management added a layer of complexity that enhanced the overall coding experience.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://ewancroft.uk/tags/fediverse/">Fediverse</a></li>
      <li><a href="https://ewancroft.uk/tags/programming/">Programming</a></li>
      <li><a href="https://ewancroft.uk/tags/python/">Python</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://ewancroft.uk/blog/moving-to-kde/">
    <span class="title">« Prev</span>
    <br>
    <span>Fedora: The KDE Plasma Spin</span>
  </a>
  <a class="next" href="https://ewancroft.uk/blog/trying-fedora/">
    <span class="title">Next »</span>
    <br>
    <span>Fedora: My First Distro Hop</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Mastodon Markov Chains, and Why I Created My Own on x"
            href="https://x.com/intent/tweet/?text=Mastodon%20Markov%20Chains%2c%20and%20Why%20I%20Created%20My%20Own&amp;url=https%3a%2f%2fewancroft.uk%2fblog%2fmastodon-markov-chains%2f&amp;hashtags=Fediverse%2cProgramming%2cPython">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Mastodon Markov Chains, and Why I Created My Own on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fewancroft.uk%2fblog%2fmastodon-markov-chains%2f&title=Mastodon%20Markov%20Chains%2c%20and%20Why%20I%20Created%20My%20Own">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Mastodon Markov Chains, and Why I Created My Own on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fewancroft.uk%2fblog%2fmastodon-markov-chains%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://ewancroft.uk/">Ewan&#39;s Corner</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <span>
        <a href="https://ewancroft.uk/legalities">Legalities</a>
    </span>
    <span>
        <a rel="me" href="https://bsky.app/profile/did:plc:ofrbh253gwicbkc5nktqepol"></a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
